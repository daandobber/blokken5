<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blokken</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    </head>
<body>

    <canvas id="visualizerCanvas"></canvas>

    <div id="ui-container" class="is-centered">
        <!-- Click to start message -->
        <div id="clickToStart" class="text-center">
            <h1 class="text-6xl mb-4" style="color: var(--text-primary);">blokken</h1>
            <p class="text-2xl" style="color: var(--text-secondary);">klik om te beginnen</p>
        </div>

        <!-- Main Controls Panel -->
        <div id="controls-panel" class="p-6 sm:p-8 w-[90vw] max-w-lg hidden">

            <!-- Tab Navigation -->
            <div class="tabs">
                <button class="tab active" data-tab="synthese">Synthese</button>
                <button class="tab" data-tab="laag">Laag</button>
                <button class="tab" data-tab="patroon">Patroon</button>
                <button class="tab" data-tab="effects">Effects</button>
                <button class="tab" data-tab="auto">Auto</button>
                <button class="tab" data-tab="kick">Drum</button>
            </div>

            <div id="controls" class="space-y-4 p-2">
                <!-- Synthese Tab -->
                <div id="tab-synthese" class="tab-content active">
                    <div class="grid grid-cols-2 gap-x-4">
                        <div class="control-group">
                            <label for="fmTimbre">Klank: <span id="fmTimbreValue">0.0</span></label>
                            <input type="range" id="fmTimbre" min="0" max="20" value="0" step="0.1">
                        </div>
                        <div class="control-group">
                            <label for="fmModDepth">Mod Depth: <span id="fmModDepthValue">0.0</span></label>
                            <input type="range" id="fmModDepth" min="0" max="2.0" value="0" step="0.05">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-x-4">
                        <div class="control-group">
                            <label for="attackTime">Attack: <span id="attackTimeValue">0.2</span></label>
                            <input type="range" id="attackTime" min="0.01" max="1.0" value="0.2" step="0.01">
                        </div>
                        <div class="control-group">
                            <label for="decayTime">Decay: <span id="decayTimeValue">0.8</span></label>
                            <input type="range" id="decayTime" min="0.05" max="3.0" value="0.8" step="0.01">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-x-4">
                        <div class="control-group">
                            <label for="sustainLevel">Sustain: <span id="sustainLevelValue">0.4</span></label>
                            <input type="range" id="sustainLevel" min="0" max="1" value="0.4" step="0.01">
                        </div>
                        <div class="control-group">
                            <label for="releaseTime">Release: <span id="releaseTimeValue">3.0</span></label>
                            <input type="range" id="releaseTime" min="0.1" max="5.0" value="3.0" step="0.1">
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-x-4 mt-2">
                        <div class="control-group">
                            <label for="synthFilterFrequency">Filter Frequency: <span id="synthFilterFrequencyValue">1200</span> Hz</label>
                            <input type="range" id="synthFilterFrequency" min="80" max="6000" value="1200" step="10">
                            <label for="synthFilterMix" class="mt-3 block">Filter Blend: <span id="synthFilterMixValue">100</span>%</label>
                            <input type="range" id="synthFilterMix" min="0" max="100" value="100" step="1">
                        </div>
                        <div class="control-group">
                            <label for="synthFilterSpan">Filter Span: <span id="synthFilterSpanValue">400</span> Hz</label>
                            <input type="range" id="synthFilterSpan" min="40" max="1800" value="400" step="10">
                        </div>
                        <div class="control-group">
                            <label for="synthFilterQ">Filter Quality: <span id="synthFilterQValue">12</span></label>
                            <input type="range" id="synthFilterQ" min="2" max="30" value="12" step="0.5">
                        </div>
                    </div>
                </div>

                <!-- Laag Tab -->
                <div id="tab-laag" class="tab-content">
                    <div class="grid grid-cols-2 gap-x-4">
                        <div class="control-group">
                            <label for="laag">Laag: <span id="laagValue">0</span></label>
                            <input type="range" id="laag" min="-24" max="24" value="0" step="1">
                        </div>
                        <div class="control-group">
                            <label for="gelaagdheid">Gelaagdheid: <span id="gelaagdheidValue">0.0</span></label>
                            <input type="range" id="gelaagdheid" min="0" max="1" value="0" step="0.05">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-x-4">
                        <div class="control-group">
                            <label for="layerFilterControl">Layer Filter: <span id="layerFilterControlValue">0.5</span></label>
                            <input type="range" id="layerFilterControl" min="0" max="1" value="0.5" step="0.05">
                        </div>
                        <div class="control-group">
                            <label for="layerOffset">Layer Offset: <span id="layerOffsetValue">0.0</span></label>
                            <input type="range" id="layerOffset" min="0" max="1" value="0" step="0.05">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-x-4 pt-2">
                        <div class="control-group">
                            <label for="layerAttack">Layer Attack: <span id="layerAttackValue">0.08</span></label>
                            <input type="range" id="layerAttack" min="0.01" max="1.5" value="0.08" step="0.01">
                        </div>
                        <div class="control-group">
                            <label for="layerDecay">Layer Decay: <span id="layerDecayValue">0.6</span></label>
                            <input type="range" id="layerDecay" min="0.05" max="3.0" value="0.6" step="0.01">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-x-4">
                        <div class="control-group">
                            <label for="layerSustain">Layer Sustain: <span id="layerSustainValue">0.5</span></label>
                            <input type="range" id="layerSustain" min="0" max="1" value="0.5" step="0.01">
                        </div>
                        <div class="control-group">
                            <label for="layerRelease">Layer Release: <span id="layerReleaseValue">2.2</span></label>
                            <input type="range" id="layerRelease" min="0.1" max="5.0" value="2.2" step="0.1">
                        </div>
                    </div>
                </div>

                <!-- Patroon Tab -->
                <div id="tab-patroon" class="tab-content">
                    <div class="control-group">
                        <label for="fundamentalNote">Grondtoon: <span id="fundamentalNoteValue">C</span></label>
                        <select id="fundamentalNote">
                            <option value="C" selected>C</option>
                            <option value="C#">C#</option>
                            <option value="D">D</option>
                            <option value="D#">D#</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="F#">F#</option>
                            <option value="G">G</option>
                            <option value="G#">G#</option>
                            <option value="A">A</option>
                            <option value="A#">A#</option>
                            <option value="B">B</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="fundamentalOctave">Octaaf: <span id="fundamentalOctaveValue">3</span></label>
                        <input type="range" id="fundamentalOctave" min="1" max="6" value="3" step="1">
                    </div>
                    <div class="control-group">
                        <label for="gevoel">Gevoel: <span id="gevoelValue">Major</span></label>
                        <input type="range" id="gevoel" min="0" max="4" value="0" step="1">
                    </div>
                    <div class="control-group">
                        <label for="noteSpread">Noot Spreiding: <span id="noteSpreadValue">2</span></label>
                        <input type="range" id="noteSpread" min="1" max="5" value="2" step="1">
                    </div>
                    <div class="control-group">
                        <label for="patternLength">Patroonlengte: <span id="patternLengthValue">4</span></label>
                        <input type="range" id="patternLength" min="1" max="16" value="4" step="1">
                    </div>
                    <div class="control-group">
                        <label for="bpm">BPM: <span id="bpmValue">90</span></label>
                        <input type="range" id="bpm" min="30" max="240" value="90" step="1">
                    </div>
                </div>

                <!-- Effects Tab -->
                <div id="tab-effects" class="tab-content">
                    <div class="grid grid-cols-2 gap-x-4">
                        <div class="control-group">
                            <label for="nDelayChains">Echo's: <span id="nDelayChainsValue">2</span></label>
                            <input type="range" id="nDelayChains" min="0" max="8" value="2" step="1">
                        </div>
                        <div class="control-group">
                            <label for="reverb">Galm: <span id="reverbValue">0.5</span></label>
                            <input type="range" id="reverb" min="0" max="1" value="0.5" step="0.05">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-x-4 pt-2">
                        <div class="control-group">
                            <label for="granular">Granular Mix: <span id="granularValue">0.0</span></label>
                            <input type="range" id="granular" min="0" max="1" value="0" step="0.05">
                        </div>
                        <div class="control-group">
                            <label for="granularTexture">Granular Texture: <span id="granularTextureValue">0.5</span></label>
                            <input type="range" id="granularTexture" min="0" max="1" value="0.5" step="0.05">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-x-4 pt-2">
                        <div class="control-group">
                            <label for="flutterDepth">Flutter Depth: <span id="flutterDepthValue">0.0</span></label>
                            <input type="range" id="flutterDepth" min="0" max="1" value="0" step="0.01">
                        </div>
                        <div class="control-group">
                            <label for="flutterRate">Flutter Rate: <span id="flutterRateValue">0.50</span></label>
                            <input type="range" id="flutterRate" min="0" max="1" value="0.5" step="0.01">
                        </div>
                    </div>
                </div>

                <!-- Auto Tab -->
                <div id="tab-auto" class="tab-content">
                    <div class="control-group">
                        <label for="automation">Automation: <span id="automationValue">0.0</span></label>
                        <input type="range" id="automation" min="0" max="1" value="0" step="0.05">
                    </div>
                    <div class="control-group">
                        <label for="automationSpeed">Automation Speed (s): <span id="automationSpeedValue">2.0</span></label>
                        <input type="range" id="automationSpeed" min="0.5" max="5.0" value="2.0" step="0.1">
                    </div>
                    <div class="control-group">
                        <label for="automationTiming">Timing (loops): <span id="automationTimingValue">0</span></label>
                        <input type="range" id="automationTiming" min="0" max="16" value="0" step="1">
                    </div>
                    <div class="control-group">
                        <label for="scaleCycleInterval">Scale Cycle (loops): <span id="scaleCycleIntervalValue">0</span></label>
                        <input type="range" id="scaleCycleInterval" min="0" max="16" value="0" step="1">
                    </div>
                    <div class="grid grid-cols-2 gap-x-4">
                        <div class="control-group">
                            <label for="scaleCycleStep1">Stap 1</label>
                            <select id="scaleCycleStep1">
                                <option value="">-</option>
                                <option value="C">C</option>
                                <option value="C#">C#</option>
                                <option value="D">D</option>
                                <option value="D#">D#</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="F#">F#</option>
                                <option value="G">G</option>
                                <option value="G#">G#</option>
                                <option value="A">A</option>
                                <option value="A#">A#</option>
                                <option value="B">B</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="scaleCycleStep2">Stap 2</label>
                            <select id="scaleCycleStep2">
                                <option value="">-</option>
                                <option value="C">C</option>
                                <option value="C#">C#</option>
                                <option value="D">D</option>
                                <option value="D#">D#</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="F#">F#</option>
                                <option value="G">G</option>
                                <option value="G#">G#</option>
                                <option value="A">A</option>
                                <option value="A#">A#</option>
                                <option value="B">B</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="scaleCycleStep3">Stap 3</label>
                            <select id="scaleCycleStep3">
                                <option value="">-</option>
                                <option value="C">C</option>
                                <option value="C#">C#</option>
                                <option value="D">D</option>
                                <option value="D#">D#</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="F#">F#</option>
                                <option value="G">G</option>
                                <option value="G#">G#</option>
                                <option value="A">A</option>
                                <option value="A#">A#</option>
                                <option value="B">B</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="scaleCycleStep4">Stap 4</label>
                            <select id="scaleCycleStep4">
                                <option value="">-</option>
                                <option value="C">C</option>
                                <option value="C#">C#</option>
                                <option value="D">D</option>
                                <option value="D#">D#</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="F#">F#</option>
                                <option value="G">G</option>
                                <option value="G#">G#</option>
                                <option value="A">A</option>
                                <option value="A#">A#</option>
                                <option value="B">B</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Kick Tab -->
                <div id="tab-kick" class="tab-content">
                    <div class="control-group">
                        <label class="text-xs uppercase tracking-wide text-[var(--text-secondary)]">Rhythm Blend</label>
                        <div class="flex items-center justify-between text-xs text-[var(--text-secondary)] mt-1">
                            <span>Style mix</span>
                            <span id="drumRhythmValue" class="text-[var(--text-primary)] font-semibold">House</span>
                        </div>
                        <input type="range" id="drumRhythm" min="0" max="1" value="0.5" step="0.01" class="mt-1" aria-label="Drum rhythm blend">
                    </div>
                    <div class="drum-matrix mt-4">
                        <div></div>
                        <div class="drum-header text-center">Volume</div>
                        <div class="drum-header text-center">Filter</div>
                        <div class="drum-header text-center">Chance</div>
                        <div class="drum-header text-center">Repeats</div>

                        <div class="drum-label">Kick</div>
                        <div class="drum-cell">
                            <span class="drum-value" id="kickVolumeValue">0.00</span>
                            <input type="range" id="kickVolume" min="0" max="1" value="0" step="0.05" aria-label="Kick volume">
                        </div>
                        <div class="drum-cell">
                            <div class="flex items-center justify-between gap-2 mb-1">
                                <span class="drum-value" id="kickFilterValue">220</span>
                                <button type="button" class="bypass-button" data-drum-filter-bypass="kick">Filter On</button>
                            </div>
                            <input type="range" id="kickFilter" min="40" max="320" value="220" step="5" aria-label="Kick filter (Hz)">
                        </div>
                        <div class="drum-cell">
                            <span class="drum-value" id="kickChanceValue">100</span>
                            <input type="range" id="kickChance" min="0" max="100" value="100" step="1" aria-label="Kick hit chance (%)">
                        </div>
                        <div class="drum-cell">
                            <span class="drum-value" id="kickRepeatValue">0.0</span>
                            <input type="range" id="kickRepeat" min="0" max="1" value="0" step="0.05" aria-label="Kick repeat amount">
                        </div>

                        <div class="drum-label">Snare</div>
                        <div class="drum-cell">
                            <span class="drum-value" id="snareVolumeValue">0.00</span>
                            <input type="range" id="snareVolume" min="0" max="1" value="0" step="0.05" aria-label="Snare volume">
                        </div>
                        <div class="drum-cell">
                            <div class="flex items-center justify-between gap-2 mb-1">
                                <span class="drum-value" id="snareFilterValue">1900</span>
                                <button type="button" class="bypass-button" data-drum-filter-bypass="snare">Filter On</button>
                            </div>
                            <input type="range" id="snareFilter" min="400" max="4000" value="1900" step="20" aria-label="Snare filter (Hz)">
                        </div>
                        <div class="drum-cell">
                            <span class="drum-value" id="snareChanceValue">100</span>
                            <input type="range" id="snareChance" min="0" max="100" value="100" step="1" aria-label="Snare hit chance (%)">
                        </div>
                        <div class="drum-cell">
                            <span class="drum-value" id="snareRepeatValue">0.0</span>
                            <input type="range" id="snareRepeat" min="0" max="1" value="0" step="0.05" aria-label="Snare repeat amount">
                        </div>

                        <div class="drum-label">Hi-Hat</div>
                        <div class="drum-cell">
                            <span class="drum-value" id="hihatVolumeValue">0.00</span>
                            <input type="range" id="hihatVolume" min="0" max="1" value="0" step="0.05" aria-label="Hi-hat volume">
                        </div>
                        <div class="drum-cell">
                            <div class="flex items-center justify-between gap-2 mb-1">
                                <span class="drum-value" id="hihatFilterValue">6500</span>
                                <button type="button" class="bypass-button" data-drum-filter-bypass="hihat">Filter On</button>
                            </div>
                            <input type="range" id="hihatFilter" min="3000" max="14000" value="6500" step="50" aria-label="Hi-hat filter (Hz)">
                        </div>
                        <div class="drum-cell">
                            <span class="drum-value" id="hihatChanceValue">100</span>
                            <input type="range" id="hihatChance" min="0" max="100" value="100" step="1" aria-label="Hi-hat hit chance (%)">
                        </div>
                        <div class="drum-cell">
                            <span class="drum-value" id="hihatRepeatValue">0.0</span>
                            <input type="range" id="hihatRepeat" min="0" max="1" value="0" step="0.05" aria-label="Hi-hat repeat amount">
                        </div>

                        <div class="drum-label">Clap</div>
                        <div class="drum-cell">
                            <span class="drum-value" id="clapVolumeValue">0.00</span>
                            <input type="range" id="clapVolume" min="0" max="1" value="0" step="0.05" aria-label="Clap volume">
                        </div>
                        <div class="drum-cell">
                            <div class="flex items-center justify-between gap-2 mb-1">
                                <span class="drum-value" id="clapFilterValue">1800</span>
                                <button type="button" class="bypass-button" data-drum-filter-bypass="clap">Filter On</button>
                            </div>
                            <input type="range" id="clapFilter" min="500" max="5000" value="1800" step="20" aria-label="Clap filter (Hz)">
                        </div>
                        <div class="drum-cell">
                            <span class="drum-value" id="clapChanceValue">100</span>
                            <input type="range" id="clapChance" min="0" max="100" value="100" step="1" aria-label="Clap hit chance (%)">
                        </div>
                        <div class="drum-cell">
                            <span class="drum-value" id="clapRepeatValue">0.0</span>
                            <input type="range" id="clapRepeat" min="0" max="1" value="0" step="0.05" aria-label="Clap repeat amount">
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-6 p-2 space-y-3">
                <div id="statePanel" class="control-group hidden space-y-2 mb-3">
                    <div class="flex space-x-2">
                        <input type="text" id="stateInput" class="modern-button flex-1 font-mono text-xs px-2 py-1" placeholder="State..." readonly>
                        <button id="copyStateButton" class="modern-button px-3 py-1 text-sm" title="Copy state">Copy</button>
                        <button id="pasteStateButton" class="modern-button px-3 py-1 text-sm" title="Paste state">Paste</button>
                    </div>
                </div>
                <div class="flex justify-center space-x-4 items-center">
                    <button id="playPauseButton" class="modern-button flex-1">Play</button>
                    <button id="randomizeButton" class="modern-button flex-1">Randomize</button>
                    <button id="stopButton" class="modern-button flex-1">Stop</button>
                    <button id="toggleVisualizerButton" class="text-xl opacity-50 hover:opacity-100 transition-opacity" title="Toggle animatie">ðŸŒŒ</button>
                    <button id="toggleStateButton" class="text-xl opacity-50 hover:opacity-100 transition-opacity" title="Copy/Paste State">&#128640;</button>
                </div>
            </div>
        </div>

        <!-- Toggle Button -->
        <button id="toggleButton" class="modern-button">
            <svg id="icon-minimize" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
            </svg>
            <svg id="icon-maximize" xmlns="http://www.w3.org/2000/svg" class="hidden" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" />
            </svg>
        </button>
    </div>
    <script type="module" src="/src/main.js"></script>
</body>
</html>

